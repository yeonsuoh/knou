# 9강 저장객체

## 1. 저장 프로시저

- 데이터베이스 언어의 특징
    - 비절차적 언어 (선언형)
    - 저장 객체를 통해 SQL의 단점을 보완
- 저장 객체의 이해
    - 정의 : SQL문을 확장하여 절차적으로 처리하기 위한 기능을 제공하는 언어
    - SQL/PSM(Persistent Stored Module) 기반의 확장 언어
    - 구조
        - 형식 정의 부분
        - 기능 정의 부분
    - 종류
        - 저장 프로시저
        - 함수
        - 트리거
- 저장 프로시저의 이해
    - 정의 : 응용 작업 중 자주 사용되거나 다수의 SQL 문으로 구성되는 복잡한 과정이 저장된 객체
    - 특징: 함수와는 달리 이름을 이용하여 값을 반환하지 않음
- 저장 객체의 활용
    - 생성
        - 문장 구분자 : DELIMITER
    - 호출
        - CALL
    - 매개변수의 사용
        - IN  : 기본 타입, 외부로부터 값을 전달
        - OUT : 반환값을 저장
        - INOUT : IN과 OUT의 목적으로 모두 사용
    - 변수의 사용
        - 사용자 정의 변수 : @ 시작, 별도의 선언 없이 사용
        - 로컬 변수 : 저장 객체 내에서만 사용, DECLARE로 선언
    - 변수값 할당
        - SET 명령
    - 선택 구조
        - IF
        - CASE
    - 반복 구조
        - WHILE

## 2. 함수

- 함수의 이해
    - 사용자가 프로그래밍 언어의 기능을 사용하여 직접 함수를 정의하는 사용자 정의 함수 기능을 제공
- 함수의 생성과 활용
    - 매개변수 : IN 타입의 매개변수만 사용 가능

## 3. 트리거

- 트리거의 이해
    - 데이터 변경 시 자동으로 지정된 애플리케이션이 동작하거나 다른 테이블의 데이터를 변경하도록 설계된 저장 프로시저의 특별한 형태
- 트리거의 역할
    - 전체적인 데이터베이스의 무결성과 일관성을 유지하도록 동작
    - 조건에 따른 데이터 적합성 검사 기능
    - 연속적 트리거 실행 시 다른 데이터베이스나 서버에 대한 광범위한 참조 무결성 검사도 가능
- 트리거의 종류
    - 트리거 이벤트 : 자동으로 반응하는 SQL 문
    - 트리거 시점 : 트리거가 실행될 시점을 명시
- 트리거의 생성과 활용
    - OLD : 해당 테이블에 변경이 가해지기 전의 레코드
    - NEW : 해당 테이블에 변경이 가해진 후의 레코드