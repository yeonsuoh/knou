# 12강 상호작용 다이어그램

## 1. 상호작용 다이어그램 개요

### 상호작용 다이어그램

- 구성 요소 사이의 상호작용을 보여줌
- 유스케이스를 수행하기 위해 객체들이 어떻게 상호작용 하는지를 표현
- 대표적인 상호작용 다이어그램은 시퀀스 다이어그램과 통신 다이어그램
- 시퀀스 다이어그램과 통신 다이어그램은 서로 1:1 변환이 가능함

## 2. 시퀀스 다이어그램

- 시스템의 구성 요소들이 어떻게 상호작용 하는가를 시각화
- 통신 다이어그램은 메시지 흐름보다는 상호작용에 참여하는 객체들 간의 관계를 파악할 때 효과적임
    - 시퀀스 다이어그램은 울타리 형태이며 통신 다이어그램은 네트워크 형태
- 시퀀스 다이어그램을 사용하는 이유
    - 동적 행위를 표현하는 모델 가운데 가장 많이 활용됨
    - 모든 유스케이스에 대해서 시퀀스 다이어그램을 작성할 필요는 없음
    - 시스템의 동작 흐름을 파악하고 빠뜨린 객체나 메시지가 없는지 검증하기 위함

### 참여 요소와 생명선

- 참여 요소는 메시지를 주고받는 주체
    - 객체 , 서브시스템 , 외부 시스템 , 하드웨어 등
    - 사각형으로 표시되며 , 다이어그램의 상단에 적당한 간격을 두고 수평으로 배치됨
    - 참여 요소는 액터 , 경계 객체 , 제어 객체 , 엔터티 객체 순으로 나타남

- 생명선
    - 참여 요소에서 아래쪽으로 향하는 점선
    - 상호작용의 순서를 보여주기 위한 시간 축
    - 위에서 아래 방향으로 시간이 흘러감
    - 길이가 시간 간격을 의미하는 것은 아님

### 메시지

- 메시지 전송 또는 시그널이 전송되는 것을 이벤트 발생이라 함
- 활성화 막대
    - 수신 객체가 활성화된 상태
    - 수신자가 주어진 이벤트에 해당하는 특정 행위를 실행하는 상황을 표현
    - 생명선을 따라 얇은 막대 모양으로 표시
- 메시지 호출자와 메시지 수신자
    - 메시지를 보내고 받는 참여 요소
    - 호출 메시지가 동기화 메시지이면 검은 삼각형의 화살표 머리로 표시
    - 리턴 메시지는 점선의 화살표로 표시
    - 의미가 명확하면 리턴 메시지를 표시하지 않아도 됨

### 메시지 형식

- 속성 = 메시지이름 (파라미터 ) : 리턴형식
    - 여러 파라미터가 필요하면 콤마 (,) 로 구분하며 하나의 파라미터 형식은 ‘이름 : 타입’
        - doSomething (number1:Number, number2:Number)
        - Number 유형의 파라미터 2 개를 가지고 doSomething ( )을 호출
        - temp=method( ): MyClass
        - method( ) 호출의 결과가 MyClass 유형이며 이것은 변수 temp 에 저장됨
- 메시지 형식이 자세히 기술되면 시퀀스 다이어그램으로부터 코드 일부를 생성할 수 있음
    - 클래스 다이어그램으로부터는 정적인 클래스 골격을 생성할 수 있음
    - 시퀀스 다이어그램과 클래스 다이어그램은 설계와 구현 사이를 연결

### 동기화/비동기화 메시지

- 동기화 메시지
    - 송신자가 메시지를 보낸 후 수신자가 메시지를 처리하고 리턴 메시지를 보낼 때 까지 기다려야 함
    - 일반적 메소드에 해당
    - 화살표 머리가 꽉찬 검은 삼각형
- 비동기화 메시지
    - 메시지를 보낸 후 리턴을 기다리지 않고 작업을 계속함
    - 2 개의 작업이 동시 수행됨
    - Java 나 C# 에서 스레드를 생성하여 실행시키는 경우
    - 예 : 문서 작업 중 프린트 작업이 필요한 경우

### 기타 메시지

- 자기 메시지 (self message)
    - 객체가 자신에게 메시지를 보내는 경우
- 리턴 메시지
    - 중요한 리턴 메시지가 아니라면 생략함
- 생성과 삭제 메시지
    - 참여 요소를 생성하는 경우나 삭제하는 경우
    - 생성을 위한 메시지는 《 create 》 를 사용하고 점선 화살표 끝에 생성되는 참여 요소를 배치함
    - 삭제를 위한 메시지는 《 destroy 》 를 사용하고 동기화 메시지와 같은 모양으로 표현하고 생명선 끝에 X 표시를 함
    - Java 나 C# 에서 생성은 new 연산자를 사용해야 하나 삭제는 자동으로 되므로 구현만을 생각한다면 삭제 메시지를 표시하지 않음

## 3. 통신 다이어그램

- 참여 요소들 간의 메시지 송수신 관계를 파악하기에 좋은 상호작용 다이어그램

- 시퀀스 다이어그램과 다른 점
    - 시퀀스 다이어그램은 메시지들의 흐름과 순서에 초점을 맞춤
    - 통신 다이어그램은 참여 요소들 간의 상호작용 관계에 초점을 둠
    - 통신 다이어그램이 전체 상호작용의 개요를 직관적으로 파악하기에 용이함

### 통신 링크와 메시지

- 통신 링크
    - 메시지를 주고받는 두 참여 요소를 연결하여 둘의 관계를 보여주는 실선
    - 통신 링크를 따라서 메시지가 전달됨
- 메시지의 표현
    - 통신 링크를 따라 호출자에서 수신자로 향하는 화살표와 메시지를 표시
    - 메시지 앞에 번호를 붙여 순서를 표현

### 메시지의 전송 순서

- 순차적 메시지
    - 1부터 시작해서 하나씩 증가시키면서 메시지의 순차적 수행을 표시
    - 1번 메시지 다음에 2번 메시지가 수행됨
- 중첩 메시지
    - 메시지를 받아 수행 중에 다른 메시지를 호출하는 경우
    - 통신 다이어그램에서는 중첩 메시지를 자연스럽게 표현하기 힘들며 1.1 과 같이 숫자를 단계적으로 사용하여 표현함
    - 2번 메시지가 시작되고 그 안에서 2.1 번 , 2.2 번 메시지가 시작됨
- 병행 메시지
    - 동시에 메시지를 보내는 경우로 메시지가 동시 수행됨
    - 1a, 1b, 1c 와 같이 표현함

### 조건 메시지와 메시지의 반복

- 조건문이 있는 메시지
    - 조건문이 참인 경우에만 메시지를 전달
    - 메시지 뒤에 [ ]를 사용하여 조건을 표현함
    - 2.3b: draw( ) [x>y]
- 메시지의 반복
- *를 사용하여 반복적으로 전달되는 메시지를 표현
- 4.2c : search( t[ i ]) *[ i =1..12]